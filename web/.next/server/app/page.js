(()=>{var e={};e.id=931,e.ids=[931],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},6723:(e,t,n)=>{"use strict";n.r(t),n.d(t,{GlobalError:()=>i.a,__next_app__:()=>p,originalPathname:()=>d,pages:()=>c,routeModule:()=>h,tree:()=>u}),n(5480),n(2029),n(5866);var r=n(3191),s=n(8716),a=n(7922),i=n.n(a),o=n(5231),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);n.d(t,l);let u=["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(n.bind(n,5480)),"/Users/zhangjingxu/Desktop/ict-selection-assistant/web/src/app/page.tsx"]}]},{layout:[()=>Promise.resolve().then(n.bind(n,2029)),"/Users/zhangjingxu/Desktop/ict-selection-assistant/web/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(n.t.bind(n,5866,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/zhangjingxu/Desktop/ict-selection-assistant/web/src/app/page.tsx"],d="/page",p={require:n,loadChunk:()=>Promise.resolve()},h=new r.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:u}})},4894:(e,t,n)=>{Promise.resolve().then(n.t.bind(n,2994,23)),Promise.resolve().then(n.t.bind(n,6114,23)),Promise.resolve().then(n.t.bind(n,9727,23)),Promise.resolve().then(n.t.bind(n,9671,23)),Promise.resolve().then(n.t.bind(n,1868,23)),Promise.resolve().then(n.t.bind(n,4759,23))},2642:()=>{},6466:(e,t,n)=>{Promise.resolve().then(n.bind(n,4497))},4497:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});var r=n(326),s=n(7577),a=n(8069);let i=process.env.NEXT_PUBLIC_API_BASE||"http://127.0.0.1:8000";function o(){let[e,t]=(0,s.useState)("rag"),[n,o]=(0,s.useState)(800),[l,u]=(0,s.useState)(300),[c,d]=(0,s.useState)(6),[p,h]=(0,s.useState)(2.5),[g,x]=(0,s.useState)(.7),[m,y]=(0,s.useState)(1024),[v,b]=(0,s.useState)(32),[f,j]=(0,s.useState)("strict"),[S,P]=(0,s.useState)(.7),[_,N]=(0,s.useState)(.6),[w,C]=(0,s.useState)("openai"),[k,T]=(0,s.useState)("gpt-4o-mini"),[O,A]=(0,s.useState)(null),[$,q]=(0,s.useState)(null),[E,R]=(0,s.useState)("用一句话总结参数化规划要点"),[I,M]=(0,s.useState)(""),[G,J]=(0,s.useState)(!1),z=(0,s.useMemo)(()=>!!w&&!!k&&!!E,[w,k,E]);async function B(){J(!0);try{let t=await (0,a.G4)(i,{scenario:e,current:{qps_peak:Number(n),latency_p95_ms:Number(l),payload_kb:Number(c),growth_12m:Number(p),reads_per_request:1,writes_per_request:.1,cache_hit_ratio:Number(g)},data:{embedding_dim:Number(m),batch:Number(v)},constraints:{compliance:f},risk:{availability:Number(S),latency:Number(_)}});A(t.plan)}finally{J(!1)}}async function U(){q((await (0,a.of)(i)).rubric)}async function D(){if(M(""),!z)return;let e=await (0,a.FM)(i,{provider:w,model:k,temperature:.2,messages:[{role:"system",content:"你是资深架构师，只输出简洁的要点。"},{role:"user",content:E},O?{role:"user",content:`参考规划: ${JSON.stringify(O).slice(0,4e3)}`}:null].filter(Boolean)});M(e?.choices?.[0]?.message?.content||e?.error?.message||JSON.stringify(e).slice(0,2e3))}return(0,r.jsxs)("main",{style:{maxWidth:1200,margin:"0 auto",padding:24},children:[r.jsx("h1",{children:"ICT 选型助手（参数化规划 + RAM/RAG 评估）"}),(0,r.jsxs)("section",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:16},children:[(0,r.jsxs)("div",{style:{border:"1px solid #eee",padding:16,borderRadius:8},children:[r.jsx("h3",{children:"业务参数"}),(0,r.jsxs)("div",{children:["场景",(0,r.jsxs)("select",{value:e,onChange:e=>t(e.target.value),children:[r.jsx("option",{value:"rag",children:"RAG/RAM"}),r.jsx("option",{value:"virtualization",children:"Virtualization"}),r.jsx("option",{value:"campus_access",children:"Campus Access"}),r.jsx("option",{value:"sec_boundary",children:"Security Boundary"})]})]}),(0,r.jsxs)("div",{children:["QPS 峰值 ",r.jsx("input",{type:"number",value:n,onChange:e=>o(Number(e.target.value))})]}),(0,r.jsxs)("div",{children:["P95 延迟(ms) ",r.jsx("input",{type:"number",value:l,onChange:e=>u(Number(e.target.value))})]}),(0,r.jsxs)("div",{children:["请求大小(KB) ",r.jsx("input",{type:"number",value:c,onChange:e=>d(Number(e.target.value))})]}),(0,r.jsxs)("div",{children:["12月增长倍数 ",r.jsx("input",{type:"number",step:"0.1",value:p,onChange:e=>h(Number(e.target.value))})]}),(0,r.jsxs)("div",{children:["缓存命中率(0-1) ",r.jsx("input",{type:"number",step:"0.01",value:g,onChange:e=>x(Number(e.target.value))})]}),(0,r.jsxs)("div",{children:["嵌入维度 ",r.jsx("input",{type:"number",value:m,onChange:e=>y(Number(e.target.value))})]}),(0,r.jsxs)("div",{children:["批大小 ",r.jsx("input",{type:"number",value:v,onChange:e=>b(Number(e.target.value))})]}),(0,r.jsxs)("div",{children:["合规类型",(0,r.jsxs)("select",{value:f,onChange:e=>j(e.target.value),children:[r.jsx("option",{value:"strict",children:"strict"}),r.jsx("option",{value:"regulated",children:"regulated"}),r.jsx("option",{value:"legacy",children:"legacy"})]})]}),(0,r.jsxs)("div",{children:["可用性偏好(0-1) ",r.jsx("input",{type:"number",step:"0.01",value:S,onChange:e=>P(Number(e.target.value))})]}),(0,r.jsxs)("div",{children:["延迟偏好(0-1) ",r.jsx("input",{type:"number",step:"0.01",value:_,onChange:e=>N(Number(e.target.value))})]}),r.jsx("button",{onClick:B,disabled:G,children:G?"计算中…":"生成参数化规划"}),r.jsx("button",{onClick:U,style:{marginLeft:8},children:"获取评估Rubric"})]}),(0,r.jsxs)("div",{style:{border:"1px solid #eee",padding:16,borderRadius:8},children:[r.jsx("h3",{children:"推理提供商(代理)"}),(0,r.jsxs)("div",{children:["Provider",(0,r.jsxs)("select",{value:w,onChange:e=>C(e.target.value),children:[r.jsx("option",{value:"openai",children:"OpenAI"}),r.jsx("option",{value:"qwen",children:"千问(Qwen)"})]})]}),(0,r.jsxs)("div",{children:["Model ",r.jsx("input",{value:k,onChange:e=>T(e.target.value),placeholder:"gpt-4o-mini 或 qwen-turbo"})]}),r.jsx("div",{children:r.jsx("textarea",{value:E,onChange:e=>R(e.target.value),rows:5,style:{width:"100%"}})}),r.jsx("button",{onClick:D,disabled:!z,children:"调用 /api/llm/infer"}),I&&r.jsx("pre",{style:{whiteSpace:"pre-wrap",background:"#fafafa",padding:8},children:I})]})]}),(0,r.jsxs)("section",{style:{marginTop:16,display:"grid",gridTemplateColumns:"1fr 1fr",gap:16},children:[(0,r.jsxs)("div",{children:[r.jsx("h3",{children:"参数化规划结果"}),r.jsx("pre",{style:{background:"#fafafa",padding:12,whiteSpace:"pre-wrap"},children:O?JSON.stringify(O,null,2):"尚未生成"})]}),(0,r.jsxs)("div",{children:[r.jsx("h3",{children:"RAM/RAG 评估 Rubric"}),r.jsx("pre",{style:{background:"#fafafa",padding:12,whiteSpace:"pre-wrap"},children:$?JSON.stringify($,null,2):"点击上方按钮获取"})]})]}),(0,r.jsxs)("footer",{style:{marginTop:24,color:"#666"},children:["API: ",i]})]})}},8069:(e,t,n)=>{"use strict";n.d(t,{BC:()=>u,FM:()=>y,G4:()=>x,Iu:()=>o,KK:()=>g,P4:()=>d,R6:()=>l,UP:()=>i,XP:()=>h,bG:()=>c,of:()=>m,s$:()=>a,zK:()=>p});let r=process.env.NEXT_PUBLIC_API_BASE||"http://127.0.0.1:8000";async function s(e,t={}){let n=`${r}${e}`,s=localStorage.getItem("api_key"),a={"Content-Type":"application/json",...t.headers||{}};s&&(a["x-api-key"]=s);let i=await fetch(n,{...t,headers:a});if(!i.ok)throw Error(`API调用失败: ${i.status} ${i.statusText}`);return i.json()}async function a(e,t){return s("/api/recommend",{method:"POST",body:JSON.stringify(t)})}async function i(e,t){let n=await fetch(`${e}/api/recommend/export`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":localStorage.getItem("api_key")||""},body:JSON.stringify(t)});if(!n.ok)throw Error(`导出失败: ${n.status} ${n.statusText}`);return n.text()}async function o(e,t){return s("/api/rag/index",{method:"POST",body:JSON.stringify(t)})}async function l(e,t){return s("/api/rag/search",{method:"POST",body:JSON.stringify(t)})}async function u(e,t){return s("/api/rag/evaluate",{method:"POST",body:JSON.stringify(t)})}async function c(e){return s("/api/rag/collections")}async function d(e,t){return s(`/api/rag/collections/${t}`,{method:"DELETE"})}async function p(e,t){return s(`/api/rag/collections/${t}/reset-bm25`,{method:"POST"})}async function h(e){return s("/api/rag/evals")}async function g(e,t){let n=await fetch(`${e}/api/rag/evals/${t}.csv`,{headers:{"x-api-key":localStorage.getItem("api_key")||""}});if(!n.ok)throw Error(`获取CSV失败: ${n.status} ${n.statusText}`);return n.text()}async function x(e,t){return s("/api/plan",{method:"POST",body:JSON.stringify(t)})}async function m(e){return s("/api/rubric")}async function y(e,t){return s("/api/llm/infer",{method:"POST",body:JSON.stringify(t)})}},2029:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a,metadata:()=>s});var r=n(9510);n(5023),n(1159);let s={title:"ICT 选型助手 \xb7 参数化规划",description:"基于业务场景的参数化扩容建议与 RAM/RAG 评估"};function a({children:e}){return r.jsx("html",{lang:"zh-CN",children:r.jsx("body",{children:e})})}},5480:(e,t,n)=>{"use strict";n.r(t),n.d(t,{$$typeof:()=>i,__esModule:()=>a,default:()=>o});var r=n(8570);let s=(0,r.createProxy)(String.raw`/Users/zhangjingxu/Desktop/ict-selection-assistant/web/src/app/page.tsx`),{__esModule:a,$$typeof:i}=s;s.default;let o=(0,r.createProxy)(String.raw`/Users/zhangjingxu/Desktop/ict-selection-assistant/web/src/app/page.tsx#default`)},5023:()=>{}};var t=require("../webpack-runtime.js");t.C(e);var n=e=>t(t.s=e),r=t.X(0,[819],()=>n(6723));module.exports=r})();