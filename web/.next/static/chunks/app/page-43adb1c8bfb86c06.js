(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{795:function(e,t,n){Promise.resolve().then(n.bind(n,8212))},357:function(e,t,n){"use strict";var r,i;e.exports=(null==(r=n.g.process)?void 0:r.env)&&"object"==typeof(null==(i=n.g.process)?void 0:i.env)?n.g.process:n(8081)},8081:function(e){!function(){var t={229:function(e){var t,n,r,i=e.exports={};function a(){throw Error("setTimeout has not been defined")}function o(){throw Error("clearTimeout has not been defined")}function u(e){if(t===setTimeout)return setTimeout(e,0);if((t===a||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:a}catch(e){t=a}try{n="function"==typeof clearTimeout?clearTimeout:o}catch(e){n=o}}();var s=[],c=!1,l=-1;function d(){c&&r&&(c=!1,r.length?s=r.concat(s):l=-1,s.length&&p())}function p(){if(!c){var e=u(d);c=!0;for(var t=s.length;t;){for(r=s,s=[];++l<t;)r&&r[l].run();l=-1,t=s.length}r=null,c=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===o||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function f(){}i.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];s.push(new h(e,t)),1!==s.length||c||u(p)},h.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=f,i.addListener=f,i.once=f,i.off=f,i.removeListener=f,i.removeAllListeners=f,i.emit=f,i.prependListener=f,i.prependOnceListener=f,i.listeners=function(e){return[]},i.binding=function(e){throw Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw Error("process.chdir is not supported")},i.umask=function(){return 0}}},n={};function r(e){var i=n[e];if(void 0!==i)return i.exports;var a=n[e]={exports:{}},o=!0;try{t[e](a,a.exports,r),o=!1}finally{o&&delete n[e]}return a.exports}r.ab="//";var i=r(229);e.exports=i}()},8212:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return u}});var r=n(7437),i=n(2265),a=n(2800);let o=n(357).env.NEXT_PUBLIC_API_BASE||"http://127.0.0.1:8000";function u(){let[e,t]=(0,i.useState)("rag"),[n,u]=(0,i.useState)(800),[s,c]=(0,i.useState)(300),[l,d]=(0,i.useState)(6),[p,h]=(0,i.useState)(2.5),[f,g]=(0,i.useState)(.7),[v,y]=(0,i.useState)(1024),[m,x]=(0,i.useState)(32),[b,j]=(0,i.useState)("strict"),[S,T]=(0,i.useState)(.7),[N,w]=(0,i.useState)(.6),[C,_]=(0,i.useState)("openai"),[k,O]=(0,i.useState)("gpt-4o-mini"),[P,E]=(0,i.useState)(null),[A,I]=(0,i.useState)(null),[J,R]=(0,i.useState)("用一句话总结参数化规划要点"),[L,B]=(0,i.useState)(""),[M,G]=(0,i.useState)(!1),q=(0,i.useMemo)(()=>!!C&&!!k&&!!J,[C,k,J]);async function K(){G(!0);try{let t=await (0,a.G4)(o,{scenario:e,current:{qps_peak:Number(n),latency_p95_ms:Number(s),payload_kb:Number(l),growth_12m:Number(p),reads_per_request:1,writes_per_request:.1,cache_hit_ratio:Number(f)},data:{embedding_dim:Number(v),batch:Number(m)},constraints:{compliance:b},risk:{availability:Number(S),latency:Number(N)}});E(t.plan)}finally{G(!1)}}async function z(){I((await (0,a.of)(o)).rubric)}async function U(){var e,t,n,r;if(B(""),!q)return;let i=await (0,a.FM)(o,{provider:C,model:k,temperature:.2,messages:[{role:"system",content:"你是资深架构师，只输出简洁的要点。"},{role:"user",content:J},P?{role:"user",content:"参考规划: ".concat(JSON.stringify(P).slice(0,4e3))}:null].filter(Boolean)});B((null==i?void 0:null===(n=i.choices)||void 0===n?void 0:null===(t=n[0])||void 0===t?void 0:null===(e=t.message)||void 0===e?void 0:e.content)||(null==i?void 0:null===(r=i.error)||void 0===r?void 0:r.message)||JSON.stringify(i).slice(0,2e3))}return(0,r.jsxs)("main",{style:{maxWidth:1200,margin:"0 auto",padding:24},children:[(0,r.jsx)("h1",{children:"ICT 选型助手（参数化规划 + RAM/RAG 评估）"}),(0,r.jsxs)("section",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:16},children:[(0,r.jsxs)("div",{style:{border:"1px solid #eee",padding:16,borderRadius:8},children:[(0,r.jsx)("h3",{children:"业务参数"}),(0,r.jsxs)("div",{children:["场景",(0,r.jsxs)("select",{value:e,onChange:e=>t(e.target.value),children:[(0,r.jsx)("option",{value:"rag",children:"RAG/RAM"}),(0,r.jsx)("option",{value:"virtualization",children:"Virtualization"}),(0,r.jsx)("option",{value:"campus_access",children:"Campus Access"}),(0,r.jsx)("option",{value:"sec_boundary",children:"Security Boundary"})]})]}),(0,r.jsxs)("div",{children:["QPS 峰值 ",(0,r.jsx)("input",{type:"number",value:n,onChange:e=>u(Number(e.target.value))})]}),(0,r.jsxs)("div",{children:["P95 延迟(ms) ",(0,r.jsx)("input",{type:"number",value:s,onChange:e=>c(Number(e.target.value))})]}),(0,r.jsxs)("div",{children:["请求大小(KB) ",(0,r.jsx)("input",{type:"number",value:l,onChange:e=>d(Number(e.target.value))})]}),(0,r.jsxs)("div",{children:["12月增长倍数 ",(0,r.jsx)("input",{type:"number",step:"0.1",value:p,onChange:e=>h(Number(e.target.value))})]}),(0,r.jsxs)("div",{children:["缓存命中率(0-1) ",(0,r.jsx)("input",{type:"number",step:"0.01",value:f,onChange:e=>g(Number(e.target.value))})]}),(0,r.jsxs)("div",{children:["嵌入维度 ",(0,r.jsx)("input",{type:"number",value:v,onChange:e=>y(Number(e.target.value))})]}),(0,r.jsxs)("div",{children:["批大小 ",(0,r.jsx)("input",{type:"number",value:m,onChange:e=>x(Number(e.target.value))})]}),(0,r.jsxs)("div",{children:["合规类型",(0,r.jsxs)("select",{value:b,onChange:e=>j(e.target.value),children:[(0,r.jsx)("option",{value:"strict",children:"strict"}),(0,r.jsx)("option",{value:"regulated",children:"regulated"}),(0,r.jsx)("option",{value:"legacy",children:"legacy"})]})]}),(0,r.jsxs)("div",{children:["可用性偏好(0-1) ",(0,r.jsx)("input",{type:"number",step:"0.01",value:S,onChange:e=>T(Number(e.target.value))})]}),(0,r.jsxs)("div",{children:["延迟偏好(0-1) ",(0,r.jsx)("input",{type:"number",step:"0.01",value:N,onChange:e=>w(Number(e.target.value))})]}),(0,r.jsx)("button",{onClick:K,disabled:M,children:M?"计算中…":"生成参数化规划"}),(0,r.jsx)("button",{onClick:z,style:{marginLeft:8},children:"获取评估Rubric"})]}),(0,r.jsxs)("div",{style:{border:"1px solid #eee",padding:16,borderRadius:8},children:[(0,r.jsx)("h3",{children:"推理提供商(代理)"}),(0,r.jsxs)("div",{children:["Provider",(0,r.jsxs)("select",{value:C,onChange:e=>_(e.target.value),children:[(0,r.jsx)("option",{value:"openai",children:"OpenAI"}),(0,r.jsx)("option",{value:"qwen",children:"千问(Qwen)"})]})]}),(0,r.jsxs)("div",{children:["Model ",(0,r.jsx)("input",{value:k,onChange:e=>O(e.target.value),placeholder:"gpt-4o-mini 或 qwen-turbo"})]}),(0,r.jsx)("div",{children:(0,r.jsx)("textarea",{value:J,onChange:e=>R(e.target.value),rows:5,style:{width:"100%"}})}),(0,r.jsx)("button",{onClick:U,disabled:!q,children:"调用 /api/llm/infer"}),L&&(0,r.jsx)("pre",{style:{whiteSpace:"pre-wrap",background:"#fafafa",padding:8},children:L})]})]}),(0,r.jsxs)("section",{style:{marginTop:16,display:"grid",gridTemplateColumns:"1fr 1fr",gap:16},children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{children:"参数化规划结果"}),(0,r.jsx)("pre",{style:{background:"#fafafa",padding:12,whiteSpace:"pre-wrap"},children:P?JSON.stringify(P,null,2):"尚未生成"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{children:"RAM/RAG 评估 Rubric"}),(0,r.jsx)("pre",{style:{background:"#fafafa",padding:12,whiteSpace:"pre-wrap"},children:A?JSON.stringify(A,null,2):"点击上方按钮获取"})]})]}),(0,r.jsxs)("footer",{style:{marginTop:24,color:"#666"},children:["API: ",o]})]})}},2800:function(e,t,n){"use strict";n.d(t,{BC:function(){return c},FM:function(){return y},G4:function(){return g},Iu:function(){return u},KK:function(){return f},P4:function(){return d},R6:function(){return s},UP:function(){return o},XP:function(){return h},bG:function(){return l},of:function(){return v},s$:function(){return a},zK:function(){return p}});let r=n(357).env.NEXT_PUBLIC_API_BASE||"http://127.0.0.1:8000";async function i(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n="".concat(r).concat(e),i=localStorage.getItem("api_key"),a={"Content-Type":"application/json",...t.headers||{}};i&&(a["x-api-key"]=i);let o=await fetch(n,{...t,headers:a});if(!o.ok)throw Error("API调用失败: ".concat(o.status," ").concat(o.statusText));return o.json()}async function a(e,t){return i("/api/recommend",{method:"POST",body:JSON.stringify(t)})}async function o(e,t){let n=await fetch("".concat(e,"/api/recommend/export"),{method:"POST",headers:{"Content-Type":"application/json","x-api-key":localStorage.getItem("api_key")||""},body:JSON.stringify(t)});if(!n.ok)throw Error("导出失败: ".concat(n.status," ").concat(n.statusText));return n.text()}async function u(e,t){return i("/api/rag/index",{method:"POST",body:JSON.stringify(t)})}async function s(e,t){return i("/api/rag/search",{method:"POST",body:JSON.stringify(t)})}async function c(e,t){return i("/api/rag/evaluate",{method:"POST",body:JSON.stringify(t)})}async function l(e){return i("/api/rag/collections")}async function d(e,t){return i("/api/rag/collections/".concat(t),{method:"DELETE"})}async function p(e,t){return i("/api/rag/collections/".concat(t,"/reset-bm25"),{method:"POST"})}async function h(e){return i("/api/rag/evals")}async function f(e,t){let n=await fetch("".concat(e,"/api/rag/evals/").concat(t,".csv"),{headers:{"x-api-key":localStorage.getItem("api_key")||""}});if(!n.ok)throw Error("获取CSV失败: ".concat(n.status," ").concat(n.statusText));return n.text()}async function g(e,t){return i("/api/plan",{method:"POST",body:JSON.stringify(t)})}async function v(e){return i("/api/rubric")}async function y(e,t){return i("/api/llm/infer",{method:"POST",body:JSON.stringify(t)})}}},function(e){e.O(0,[971,23,744],function(){return e(e.s=795)}),_N_E=e.O()}]);